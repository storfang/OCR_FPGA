`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 02.05.2020 14:48:22
// Design Name: 
// Module Name: network_tb
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module network_tb();
        reg [15:0] x;
        reg [3:0] z;
        real  y[3:0];
        reg clk;
        reg rst;
        reg mode;
        reg [255:0] temp ;
        reg [255:0] temp2 ;
        reg ready;
        reg start;
        localparam
        //A = 16'b1111000011110000,
        //C = 16'b0000000000001111,
        //I = 16'b1111000000000011,
        //N = 16'b1111000000110000,
        //P = 16'b1111000000001100,
        //U = 16'b1111000000110000,
        //Y = 16'b1111000011000000,
        //Z = 16'b1111001100000000;
        
               
        A = 16'b0110_1001_1111_1001,//01
        C = 16'b1111_0001_0001_1111,//11
        D = 16'b0111_1001_1001_0111,//01
        F = 16'b1111_0001_1111_0001,//11
        H = 16'b1001_1111_1111_1001,//01
        I = 16'b1111_0110_0110_1111,//10    
        J = 16'b1111_1000_1001_1110,//10
        L = 16'b0001_0001_0001_1111,//00
        N = 16'b1001_1011_1101_1001,//01   
        O = 16'b1111_1001_1001_1111,//11
        P = 16'b1111_1001_1111_0001,//11
        T = 16'b1111_0110_0110_0110,//10
        U = 16'b1001_1001_1001_0110,//01
        X = 16'b1001_0110_0110_1001,//00
        Y = 16'b1001_0110_0110_0110,//00
        Z = 16'b1111_0100_0010_1111;//10
        
        
        /*single_neuron_test singleneuron(
        .x(x) ,.z(z), .rst(rst) , .clk(clk), .y(y), .mode(mode));*/
        network network1(
        .x1(x) ,.z(z), .rst(rst) , .clk(clk), .y3(y), .mode(mode), .start(start), .ready(ready));
        
        int i = 0;
        
      //  wire [3:0] x_nxt[3:0]= {1, 0, 1, 0};
    initial
         clk <= 1'b1;
        always
         #5 clk <= ~clk;
         
    initial
    begin
    rst <= 1'b1;
    #10;
    rst <= 1'b0;
    /*x[15:0] <= 0;
    x[1] <= 0;
    x[2] <= 0;
    x[3] <= 0;*/
    z <=4'b0001;
    mode <=0;
    start <=0;
    temp[255:255-(16*1)+1] <= A;
    temp[255-(16*1):255-(16*2)+1] <= C;
    temp[255-(16*2):255-(16*3)+1] <= D;
    temp[255-(16*3):255-(16*4)+1] <= F;
    temp[255-(16*4):255-(16*5)+1] <= H;
    temp[255-(16*5):255-(16*6)+1] <= I;
    temp[255-(16*6):255-(16*7)+1] <= J;
    temp[255-(16*7):255-(16*8)+1] <= L;
    temp[255-(16*8):255-(16*9)+1] <= N;
    temp[255-(16*9):255-(16*10)+1] <= O;
    temp[255-(16*10):255-(16*11)+1] <= P;
    temp[255-(16*11):255-(16*12)+1] <= T;
    temp[255-(16*12):255-(16*13)+1] <= U;
    temp[255-(16*13):255-(16*14)+1] <= X;
    temp[255-(16*14):255-(16*15)+1] <= Y;
    temp[255-(16*15):255-(16*16)+1] <= Z;
    temp2 <= temp;
    #300;
    mode <=1;
    start <=1;
    #15; start <= 0;
    
    //x <= C; z <= 8; #800;
    //x <= D; z <= 15; #800;
    //x <= A; z <= 7; #800;
    //x <= F; z <= 11; #800;
    //x <= H; z <= 6; #800;
    //x <= I; z <= 0; #800;
    //x <= J; z <= 12; #800;
    //x <= L; z <= 1; #800;
    //x <= N; z <= 5; #800;
    //x <= O; z <= 5; #8000;
    //x <= P; z <= 7; #8000;
    //x <= T; z <= 6; #8000;
    //x <= U; z <= 2; #8000;
    //x <= X; z <= 3; #8000;
    //x <= Y; z <= 1; #8000;
    //x <= Z; z <= 0; #8000
    mode <= 1;

        for(i=0;i<500;i++)begin
       /* x <= A; z <= 8; #50;
        x <= C; z <= 9; #50;
        x <= D; z <= 11; #50;
        x <= F; z <= 10; #50;
        x <= H; z <= 14; #50;
        x <= I; z <= 15; #50;
        x <= J; z <= 13; #50;
        x <= L; z <= 12; #50;
        x <= N; z <= 4; #50;
        x <= O; z <= 5; #50;
        x <= P; z <= 7; #50;
        x <= T; z <= 6; #50;
        x <= U; z <= 2; #50;
        x <= X; z <= 3; #50;
        x <= Y; z <= 1; #50;
        x <= Z; z <= 0; #50;*/
        x <= A; z <= 7; #90;
        x <= C; z <= 8; #90;
        x <= D; z <= 15; #90;
        x <= F; z <= 11; #90;
        x <= H; z <= 6; #90;
        x <= I; z <= 0; #90;
        x <= J; z <= 12; #90;
        x <= L; z <= 1; #90;
        x <= N; z <= 5; #90;
        x <= O; z <= 13; #90;
        x <= P; z <= 14; #90;
        x <= T; z <= 10; #90;
        x <= U; z <= 4; #90;
        x <= X; z <= 3; #90;
        x <= Y; z <= 2; #90;
        x <= Z; z <= 9; #90;
        end
        mode <= 0;
        $display("mode = 0");
   /* x <= A; z <= 8; #80;
    x <= C; z <= 9; #80;
    x <= D; z <= 11; #80;
    x <= F; z <= 10; #80;
    x <= H; z <= 14; #80;
    x <= I; z <= 15; #80;
    x <= J; z <= 13; #80;
    x <= L; z <= 12; #80;
    x <= N; z <= 4; #80;
    x <= O; z <= 5; #80;
    x <= P; z <= 7; #80;
    x <= T; z <= 6; #80;
    x <= U; z <= 2; #80;
    x <= X; z <= 3; #80;
    x <= Y; z <= 1; #80;
    x <= Z; z <= 0; #80;*/
    x <= A; z <= 7; #50;
    x <= C; z <= 8; #50;
    x <= D; z <= 15; #50;
    x <= F; z <= 11; #50;
    x <= H; z <= 6; #50;
    x <= I; z <= 0; #50;
    x <= J; z <= 12; #50;
    x <= L; z <= 1; #50;
    x <= N; z <= 5; #50;
    x <= O; z <= 13; #50;
    x <= P; z <= 14; #50;
    x <= T; z <= 10; #50;
    x <= U; z <= 4; #50;
    x <= X; z <= 3; #50;
    x <= Y; z <= 2; #50;
    x <= Z; z <= 9; #50;
    
    
    $finish;
    end  
      
         always@(posedge clk)begin
       //  x[3:0] <= x_nxt[0:3];
            //x[3] <=1;
           /* if(i==2) begin
                x[i] <= 1;
                x[i+1] <= 0;
              / x <= 4'b1111;
                i = 0;
                z <= 1;           
                end
            else begin i=i+1; x <= 4'b0000; z <= 0; temp2 = temp; start = 1; end*/
       if(ready==1)begin
       start = 1;
         /*if(i<0)begin
         start = 0;
         //x[15:0] <= temp2[255-(16*0):255-(16*1)+1];
         //temp2 <= (temp2 << 16);
         //x[i] <= 1; x[i-1] <= 0;
         //x<=i;
         x<=(x << 4);
         z <= (z << 4);
         //z<=i*3;
        // x[i] = 1'b1;
        // x[i-1] = 1'b0;
         i = i+1;
         end
         else begin
         i=0; temp2 = temp;  z <=4'b0001; x<=C; end start = 1;
       */end end
       // z <=4'b0001;
endmodule
